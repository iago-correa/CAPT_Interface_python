{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}
  Student Completion Report
{% endblock %}

{% block content %}
<div id="content-main">
  <h1>Student Completion Report</h1>
  <p>This report shows the number of students who completed all required recordings for a specific audio type within each period.</p>

  {% for period_report in report_data %}
    <div class="module">
      <h2>{{ period_report.name }}</h2>
      <table>
        <thead>
          <tr>
            <th>Group</th>
            <th>Number of students completed</th>
            <th>Total number of students</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Control group</strong></td>
            <td>{{ period_report.counts.control_completed }}</td>
            <td>{{ period_report.counts.control_total }}</td>
          </tr>
          <tr>
            <td><strong>Experimental group</strong></td>
            <td>{{ period_report.counts.experimental_completed }}</td>
            <td>{{ period_report.counts.experimental_total }}</td>
          </tr>
          <tr>
            <td><strong>Total</strong></td>
            <td>{{ period_report.counts.total_completed }}</td>
            <td>{{ period_report.counts.total_total }}</td>
          </tr>

          <tr>
            <td><strong>Control group (retained)</strong></td>
            <td>{{ period_report.retention.control_completed }}</td>
            <td>{{ period_report.retention.control_total }}</td>
          </tr>
          <tr>
            <td><strong>Experimental group (retained)</strong></td>
            <td>{{ period_report.retention.experimental_completed }}</td>
            <td>{{ period_report.retention.experimental_total }}</td>
          </tr>
          <tr>
            <td><strong>Total (retained)</strong></td>
            <td>{{ period_report.retention.total_completed }}</td>
            <td>{{ period_report.retention.total_total }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  {% empty %}
    <p>No reporting periods are configured. Please check your admin.py file.</p>
  {% endfor %}
</div>
{% endblock %}
